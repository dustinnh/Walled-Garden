# Authelia Walled Garden - Environment Variables Template
#
# IMPORTANT: This is a template file. To use:
# 1. Copy this file: cp .env.template .env
# 2. Generate all secrets using the provided script: ../scripts/generate-secrets.sh
# 3. Replace all placeholder values with your generated secrets
# 4. Replace example.com with your actual domain
# 5. Configure SMTP settings if enabling email notifications
#
# NEVER commit the .env file to version control!
# It is already included in .gitignore

###############################################################################
# AUTHELIA SECRETS
###############################################################################

# Generate these with: openssl rand -base64 64
# These are used in authelia-config.yml

# JWT secret for token signing
JWT_SECRET=your-jwt-secret-generated-with-openssl-rand-base64-64

# Session encryption secret
SESSION_SECRET=your-session-secret-generated-with-openssl-rand-base64-64

# Storage encryption key (encrypts TOTP secrets, U2F keys in database)
STORAGE_ENCRYPTION_KEY=your-encryption-key-generated-with-openssl-rand-base64-64

###############################################################################
# USER ADMIN (authelia-file-admin) SECRETS
###############################################################################

# Generate these with: openssl rand -base64 32
# These are used in docker-compose.yml for the user-admin service

# Flask session secret
SECRET_KEY=your-flask-secret-generated-with-openssl-rand-base64-32

# Audit log HMAC signing key
AUDIT_HMAC_KEY=your-hmac-key-generated-with-openssl-rand-base64-32

###############################################################################
# NEXTERM SECRETS (Optional - only if deploying Nexterm)
###############################################################################

# Generate with: openssl rand -hex 32
# Used in docker-compose.yml for nexterm service

NEXTERM_ENCRYPTION_KEY=your-nexterm-encryption-key-generated-with-openssl-rand-hex-32

###############################################################################
# SMTP CONFIGURATION (Optional - for email notifications)
###############################################################################

# Enable email notifications (true/false)
EMAIL_ENABLED=false

# SMTP server settings
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USERNAME=noreply@example.com
SMTP_PASSWORD=your-smtp-password-here

# Email sender information
SMTP_FROM_EMAIL=noreply@example.com
SMTP_FROM_NAME=Authelia Admin

# Admin email for security notifications
ADMIN_EMAIL=admin@example.com

# SMTP security settings
SMTP_USE_TLS=true

###############################################################################
# DOMAIN CONFIGURATION
###############################################################################

# Replace with your actual domain (used in n8n configuration)
DOMAIN=example.com

# n8n webhook URL
N8N_WEBHOOK_URL=https://example.com/n8n/

###############################################################################
# ADDITIONAL CONFIGURATION
###############################################################################

# Timezone (used by Authelia)
TZ=America/New_York

# Password policy settings (user-admin)
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGIT=true
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_CHECK_BREACH=true
PASSWORD_HISTORY_COUNT=5
PASSWORD_EXPIRATION_DAYS=0

###############################################################################
# PRODUCTION DEPLOYMENT CHECKLIST
###############################################################################

# Before deploying to production, ensure:
#
# ✅ All secrets are generated with strong random values (use scripts/generate-secrets.sh)
# ✅ All instance of "example.com" replaced with your actual domain
# ✅ SMTP configured if you want email notifications
# ✅ This .env file is NOT committed to version control
# ✅ File permissions are restricted: chmod 600 .env
# ✅ Secrets are backed up securely (encrypted backup, password manager, etc.)
#
# Security Notes:
# - Never reuse secrets across environments (dev, staging, production)
# - Rotate secrets periodically (e.g., every 90 days)
# - If secrets are compromised, rotate immediately and review audit logs
# - Store backups of this file in a secure location (NOT in git!)
